# Data Methodology

## Data Source

KKBox Churn Prediction Dataset from Kaggle (WSDM Cup 2018).

KKBox is a music streaming service based in Taiwan. The dataset was released for a competition to predict user churn.

## Tables

Four tables loaded to BigQuery:

- train: 970,960 rows. User IDs and churn labels.
- members: 6,769,473 rows. User demographics and registration info.
- transactions: 1,431,009 rows. Subscription transaction history.
- user_logs: 392,106,543 rows. Daily listening activity logs.

## Loading Process

1. Raw CSV files downloaded from Kaggle
2. Uploaded to Google Cloud Storage bucket 
3. Loaded from GCS to BigQuery using `bq load` with autodetect schema

## Churn Definition

The churn label was generated by KKBox using the logic in `WSDMChurnLabeller.scala`. The exact definition will be examined during EDA.

## Data Cleaning

- **Age (bd):** 67% invalid (0 or negative). Valid range: 13-100. Outside treated as missing.
- **Gender:** 65% missing. Encoded as "unknown".
- **Listening time (total_secs):** Filter 0-57600 seconds (16 hours). Excludes 0.06% corrupt records.
- **Registration dates:** 1.9% after prediction cutoff get NULL tenure.

## Notes

- The members table contains more users than train, indicating not all registered users are included in the prediction set